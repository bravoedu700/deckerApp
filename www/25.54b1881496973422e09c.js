(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{OP61:function(o,t,e){"use strict";e.r(t),e.d(t,"TurnosPagePageModule",(function(){return m}));var n=e("ofXK"),i=e("TEn/"),r=e("tyNb"),s=e("mrSG"),a=e("fXoL"),l=e("3Pt+"),c=e("N2bL"),b=e("4dRw"),u=e("m/P+"),d=[{path:"",component:function(){function o(o,t,e,n,i,r,s,a){this.navCtrl=o,this.formBuilder=t,this.prodsProvider=e,this.loadingCtrl=n,this.alertController=i,this.modalCtrl=r,this.agenciasProvider=s,this.iab=a,this.completed=!1,this.nrowhat="5492915077611",this.options={location:"no",hidden:"no",zoom:"yes",hideurlbar:"yes",toolbar:"no",hidenavigationbuttons:"yes"}}return o.prototype.ngOnInit=function(){var o=this;this.presentLoading(),this.getTelefono(),this.datospersonales=this.getLocalStorage(),this.agenciasProvider.getAgencias().subscribe((function(t){o.agencias=t})),this.todo=this.formBuilder.group({nombre:[this.datospersonales.nombre],localidad:[this.datospersonales.localidad],email:[this.datospersonales.email],telefono:[""],mensaje:[""],agencia:[""],vehiculo:[""],tipo_contacto:["turno"],chasis:[""],piezas:[""],fecha_asistencia:[""],tipo_mantenimiento:[""]})},o.prototype.getTelefono=function(){var o=this;this.agenciasProvider.getTelefonos().subscribe((function(t){o.nrowhat=t.repuestos}))},o.prototype.setLocalStorage=function(o){window.localStorage.datospersonales=JSON.stringify(o)},o.prototype.getLocalStorage=function(){return JSON.parse(window.localStorage.datospersonales||"[]")},o.prototype.closeModal=function(){this.navCtrl.pop()},o.prototype.logForm=function(){var o=this;this.loading.present(),this.setLocalStorage(this.todo.value),this.prodsProvider.sendServiceContact(this.todo.value).subscribe((function(t){setTimeout((function(){o.loading.dismiss(),o.iab.create(o.urlWhatsapp(o.todo.value),"_system",o.options),o.navCtrl.pop(),o.navCtrl.navigateForward(["categorias"])}),1e3)}),(function(t){o.loading.dismiss(),console.log("error al enviar, fallo el servicio"),o.presentError()}))},o.prototype.presentError=function(){return Object(s.a)(this,void 0,void 0,(function(){return Object(s.c)(this,(function(o){try{this.loading=this.alertController.create({cssClass:"my-custom-class",header:"Error",subHeader:"El mensaje no se pudo enviar.",message:"El mensaje no se pudo enviar. Verifique su conexi\xf3n e intente nuevamente m\xe1s tarde.",buttons:["OK"]}),this.loading.present()}catch(t){console.error("Ocurri\xf3 un error:",t)}return[2]}))}))},o.prototype.urlWhatsapp=function(o){var t=" Hola";return o.nombre&&(t+=", mi nombre es "+o.nombre),o.localidad&&(t+=", soy de "+o.localidad),t+=" necesito un turno para el taller.",o.email&&(t+="\n Mi email es: "+o.email),""!=o.mensaje&&(t+="\n Comentarios: "+o.mensaje),"https://wa.me/"+this.nrowhat+"?text="+encodeURI(t)},o.prototype.presentLoading=function(){return Object(s.a)(this,void 0,void 0,(function(){var o,t;return Object(s.c)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),o=this,[4,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Por favor Espere..."})];case 1:return o.loading=e.sent(),[3,3];case 2:return t=e.sent(),console.error("Ocurri\xf3 un error:",t),[3,3];case 3:return[2]}}))}))},o.\u0275fac=function(t){return new(t||o)(a.Ib(i.Q),a.Ib(l.a),a.Ib(c.a),a.Ib(i.O),a.Ib(i.a),a.Ib(i.P),a.Ib(b.a),a.Ib(u.a))},o.\u0275cmp=a.Cb({type:o,selectors:[["app-turnos-page"]],decls:34,vars:2,consts:[["slot","start"],["text",""],[1,"ion-padding"],["src","../../assets/imgs/bg_turnos.png","alt","",1,"img-header"],[3,"formGroup","ngSubmit"],["stacked",""],["type","text","formControlName","nombre"],["type","text","formControlName","telefono"],["type","text","formControlName","localidad"],["type","email","formControlName","email"],["type","text","formControlName","mensaje"],["expand","block","fill","solid","size","large",3,"disabled","click"]],template:function(o,t){1&o&&(a.Nb(0,"ion-header"),a.Nb(1,"ion-toolbar"),a.Nb(2,"ion-buttons",0),a.Jb(3,"ion-back-button",1),a.Mb(),a.Nb(4,"ion-title"),a.oc(5,"Turnos"),a.Mb(),a.Mb(),a.Mb(),a.Nb(6,"ion-content",2),a.Jb(7,"img",3),a.Nb(8,"h1"),a.oc(9,"Reservar Turno"),a.Mb(),a.Nb(10,"form",4),a.Vb("ngSubmit",(function(){return t.logForm()})),a.Nb(11,"ion-item"),a.Nb(12,"ion-label",5),a.oc(13,"Nombre y Apellido"),a.Mb(),a.Jb(14,"ion-input",6),a.Mb(),a.Nb(15,"ion-item"),a.Nb(16,"ion-label",5),a.oc(17,"Tel\xe9fono"),a.Mb(),a.Jb(18,"ion-input",7),a.Mb(),a.Nb(19,"ion-item"),a.Nb(20,"ion-label",5),a.oc(21,"Localidad"),a.Mb(),a.Jb(22,"ion-input",8),a.Mb(),a.Nb(23,"ion-item"),a.Nb(24,"ion-label",5),a.oc(25,"Email"),a.Mb(),a.Jb(26,"ion-input",9),a.Mb(),a.Nb(27,"ion-item"),a.Nb(28,"ion-label",5),a.oc(29,"Mensaje"),a.Mb(),a.Jb(30,"ion-input",10),a.Mb(),a.Jb(31,"br"),a.Nb(32,"ion-button",11),a.Vb("click",(function(){return t.logForm()})),a.oc(33,"Solicitar"),a.Mb(),a.Mb(),a.Mb()),2&o&&(a.xb(10),a.cc("formGroup",t.todo),a.xb(22),a.cc("disabled",!t.todo.valid))},directives:[i.p,i.L,i.f,i.c,i.d,i.K,i.k,l.m,l.h,l.c,i.u,i.v,i.t,i.U,l.g,l.b,i.e],styles:[""]}),o}()}],p=function(){function o(){}return o.\u0275mod=a.Gb({type:o}),o.\u0275inj=a.Fb({factory:function(t){return new(t||o)},imports:[[r.i.forChild(d)],r.i]}),o}(),m=function(){function o(){}return o.\u0275mod=a.Gb({type:o}),o.\u0275inj=a.Fb({factory:function(t){return new(t||o)},imports:[[n.b,i.M,p,l.d,l.k]]}),o}()}}]);