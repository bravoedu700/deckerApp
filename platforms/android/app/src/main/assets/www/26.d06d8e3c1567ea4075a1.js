(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{mbFJ:function(t,e,o){"use strict";o.r(e),o.d(e,"WhatsappPageModule",(function(){return h}));var n=o("ofXK"),i=o("TEn/"),r=o("tyNb"),a=o("mrSG"),s=o("fXoL"),c=o("3Pt+"),l=o("N2bL"),u=o("4dRw"),b=o("m/P+"),d=function(){function t(t,e,o,n,i,r,a,s,c){this.navCtrl=t,this.formBuilder=e,this.loadingCtrl=o,this.alertController=n,this.modalCtrl=i,this.prodsProvider=r,this.activatedRoute=a,this.agenciasProv=s,this.iab=c,this.completed=!1,this.options={location:"no",hidden:"no",zoom:"yes",hideurlbar:"yes",toolbar:"no",hidenavigationbuttons:"yes"},this.nrowhat="5492262411046"}return t.prototype.ngOnInit=function(){var t=this;if(this.presentLoading(),this.getTelefono(),this.datospersonales=this.getLocalStorage(),this.todo=this.formBuilder.group({nombre:[this.datospersonales.nombre],localidad:[this.datospersonales.localidad],email:[this.datospersonales.email],telefono:[""],mensaje:[""],agencia:[""],vehiculo:[""],tipo_contacto:["Whatsapp"],chasis:[""],piezas:[""],fecha_asistencia:[""],tipo_mantenimiento:[""],unidad:[""]}),this.activatedRoute.snapshot.params.id){var e=this.activatedRoute.snapshot.params.id;this.prodsProvider.getItem(e).subscribe((function(o){t.item=o,t.todo.get("unidad").setValue(e),t.logForm()}),(function(t){return console.log(t)}))}},t.prototype.getTelefono=function(){var t=this;this.agenciasProv.getTelefonos().subscribe((function(e){t.nrowhat=e.ventas}))},t.prototype.setLocalStorage=function(t){window.localStorage.datospersonales=JSON.stringify(t)},t.prototype.getLocalStorage=function(){return JSON.parse(window.localStorage.datospersonales||"[]")},t.prototype.logForm=function(){return Object(a.a)(this,void 0,void 0,(function(){var t=this;return Object(a.c)(this,(function(e){try{this.setLocalStorage(this.todo.value),this.prodsProvider.sendServiceContact(this.todo.value).subscribe((function(e){setTimeout((function(){t.iab.create(t.urlWhatsapp(t.todo.value),"_system",t.options),t.navCtrl.pop(),t.navCtrl.navigateForward(["categorias"])}),500)}),(function(e){t.loading.dismiss(),t.presentAlert()}))}catch(o){console.error("Ocurri\xf3 un error:",o)}return[2]}))}))},t.prototype.presentAlert=function(){return Object(a.a)(this,void 0,void 0,(function(){var t;return Object(a.c)(this,(function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,this.alertController.create({cssClass:"",header:"Error",subHeader:"El mensaje no se pudo enviar.",message:"Verifique su conexi\xf3n e intente nuevamente m\xe1s tarde..",buttons:["OK"]})];case 1:return[4,e.sent().present()];case 2:return e.sent(),[3,4];case 3:return t=e.sent(),console.error("Ocurri\xf3 un error:",t),[3,4];case 4:return[2]}}))}))},t.prototype.presentLoading=function(){return Object(a.a)(this,void 0,void 0,(function(){var t,e;return Object(a.c)(this,(function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),t=this,[4,this.loadingCtrl.create({cssClass:"my-custom-class",message:"Por favor Espere..."})];case 1:return t.loading=o.sent(),[3,3];case 2:return e=o.sent(),console.error("Ocurri\xf3 un error:",e),[3,3];case 3:return[2]}}))}))},t.prototype.urlWhatsapp=function(t){var e=" Hola";return t.nombre&&(e+=", mi nombre es "+t.nombre),this.item&&(e=e+", me interesa la unidad: "+this.item.vehicle_model+" \n https://usados.deckercamiones.com.ar/usados/unidad/"+this.item.vehicle_id+"/"),t.localidad&&(e+="\n Soy de: "+t.localidad),t.email&&(e+="\n Mi email es: "+t.email),""!=t.mensaje&&(e+="\n Comentarios: "+t.mensaje),"https://wa.me/"+this.nrowhat+"?text="+encodeURI(e)},t.\u0275fac=function(e){return new(e||t)(s.Ib(i.Q),s.Ib(c.a),s.Ib(i.O),s.Ib(i.a),s.Ib(i.P),s.Ib(l.a),s.Ib(r.a),s.Ib(u.a),s.Ib(b.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-whatsapp"]],inputs:{item:"item"},decls:36,vars:2,consts:[["slot","start"],["text",""],[1,"ion-padding"],["src","../../assets/imgs/bg_repuestos.png","alt","",1,"img-header"],[3,"formGroup","ngSubmit"],["stacked",""],["type","text","formControlName","nombre"],["type","text","formControlName","telefono"],["type","text","formControlName","localidad"],["type","email","formControlName","email"],["type","text","formControlName","mensaje"],["expand","block","fill","solid","size","large",3,"disabled","click"]],template:function(t,e){1&t&&(s.Nb(0,"ion-header"),s.Nb(1,"ion-toolbar"),s.Nb(2,"ion-buttons",0),s.Jb(3,"ion-back-button",1),s.Mb(),s.Nb(4,"ion-title"),s.oc(5,"WhatsApp"),s.Mb(),s.Mb(),s.Mb(),s.Nb(6,"ion-content",2),s.Jb(7,"img",3),s.Nb(8,"h1"),s.oc(9,"Contacto"),s.Mb(),s.Nb(10,"p"),s.oc(11,"Escribino tu consulta por WhatsApp."),s.Mb(),s.Nb(12,"form",4),s.Vb("ngSubmit",(function(){return e.logForm()})),s.Nb(13,"ion-item"),s.Nb(14,"ion-label",5),s.oc(15,"Nombre y Apellido"),s.Mb(),s.Jb(16,"ion-input",6),s.Mb(),s.Nb(17,"ion-item"),s.Nb(18,"ion-label",5),s.oc(19,"Tel\xe9fono"),s.Mb(),s.Jb(20,"ion-input",7),s.Mb(),s.Nb(21,"ion-item"),s.Nb(22,"ion-label",5),s.oc(23,"Localidad"),s.Mb(),s.Jb(24,"ion-input",8),s.Mb(),s.Nb(25,"ion-item"),s.Nb(26,"ion-label",5),s.oc(27,"Email"),s.Mb(),s.Jb(28,"ion-input",9),s.Mb(),s.Nb(29,"ion-item"),s.Nb(30,"ion-label",5),s.oc(31,"Mensaje"),s.Mb(),s.Jb(32,"ion-textarea",10),s.Mb(),s.Jb(33,"br"),s.Nb(34,"ion-button",11),s.Vb("click",(function(){return e.logForm()})),s.oc(35,"Enviar"),s.Mb(),s.Mb(),s.Mb()),2&t&&(s.xb(12),s.cc("formGroup",e.todo),s.xb(22),s.cc("disabled",!e.todo.valid))},directives:[i.p,i.L,i.f,i.c,i.d,i.K,i.k,c.m,c.h,c.c,i.u,i.v,i.t,i.U,c.g,c.b,i.J,i.e],styles:[""]}),t}(),p=[{path:"",component:d},{path:":id",component:d}],m=function(){function t(){}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[r.i.forChild(p)],r.i]}),t}(),h=function(){function t(){}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(e){return new(e||t)},imports:[[n.b,i.M,m,c.d,c.k]]}),t}()}}]);